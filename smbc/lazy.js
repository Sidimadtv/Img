!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof exports?module.exports=t:e.emergence=t(e)}(this,function(e){"use strict";var t,n,o,i,r,a,l,s,c,d={},u=function(){},f=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|playbook|silk/i.test(navigator.userAgent)},m=function(e){var t=e.offsetWidth,n=e.offsetHeight,o=0,i=0;do{isNaN(e.offsetTop)||(o+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft)}while(null!==(e=e.offsetParent));return{width:t,height:n,top:o,left:i}},h=function(e){if(function(e){return null===e.offsetParent}(e))return!1;var t,o,i,d,u,f,h,g,w=m(e),v=function(e){var t,n;return e!==window?(t=e.clientWidth,n=e.clientHeight):(t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight),{width:t,height:n}}(n),y=function(e){return e!==window?{x:e.scrollLeft+m(e).left,y:e.scrollTop+m(e).top}:{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}(n),p=w.width,b=w.height,E=w.top,L=w.left;return t=E+b*r,o=L+p-p*r,i=E+b-b*r,d=L+p*r,u=y.y+a,f=y.x-l+v.width,h=y.y-s+v.height,g=y.x+c,t<h&&i>u&&d<f&&o>g},g=function(){t||(clearTimeout(t),t=setTimeout(function(){d.engage(),t=null},o))};return d.init=function(e){var t,d=function(e,t){return parseInt(e||t,10)};n=(e=e||{}).container||window,i=void 0===e.handheld||e.handheld,o=d(e.throttle,250),t=e.elemCushion,r=parseFloat(t||.1),a=d(e.offsetTop,0),l=d(e.offsetRight,0),s=d(e.offsetBottom,0),c=d(e.offsetLeft,0),u=e.callback||u,"querySelectorAll"in document?(f()&&i||!f())&&(window.addEventListener?(window.addEventListener("load",g,!1),n.addEvharmunyJsAnmiListener("scroll",g,!1),n.addEventListener("resize",g,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&g()}),n.attachEvent("onscroll",g),n.attachEvent("onresize",g))):console.log("Emergence.js is not supported in this browser.")},d.engage=function(){if(jamal.lazyload){for(var e=(l=document.querySelectorAll("[data-src]")).length,t=0;t<e;t++)s=l[t],h(s)&&(s.setAttribute("src",s.getAttribute("data-src")),s.removeAttribute("data-src"),s.className+=" lazy-done",u(s,"jamalImgVisible"),jQuery.fn.masonry&&jQuery("#masonry-grid").masonry("layout"));var n=(l=document.querySelectorAll("[data-lazy-bg]")).length;for(t=0;t<n;t++)s=l[t],h(s)&&(s.setAttribute("style","background-image:url("+s.getAttribute("data-lazy-bg")+")"),s.removeAttribute("data-lazy-bg"),s.className=s.className,u(s,"JamalBgVisible"))}e||o||c||n||d.disengage()},d.disengage=function(){window.removeEventListener?(n.removeEventListener("scroll",g,!1),n.removeEventListener("resize",g,!1)):(n.detachEvent("onscroll",g),n.detachEvent("onresize",g)),clearTimeout(t)},d});